"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[350],{9390:function(e,t,n){var o=n(79619),r=n(15925),s=n(1055),a=n(53061),i=n(4711),c=n(40824),f=n(80677),h=n(82776),l=n(72893),g=n(1733),u=n(91027),w=n(36117);const d=new l.Z({source:new a.Z({layer:"stamen_toner"})}),m=new s.Z({layers:[d],target:"map",view:new c.ZP({center:[-11e6,46e5],zoom:2})}),y=new f.ZP({stroke:new h.Z({color:"#EAE911",width:2})}),Z=new i.Z({attributions:'Flight data by <a href="https://openflights.org/data.html">OpenFlights</a>,',loader:function(){fetch("data/openflights/flights.json").then((function(e){return e.json()})).then((function(e){const t=e.flights;for(let e=0;e<t.length;e++){const n=t[e],s=n[0],a=n[1],i=new arc.GreatCircle({x:s[1],y:s[0]},{x:a[1],y:a[0]}).Arc(100,{offset:10}),c=[];i.geometries.forEach((function(e){const t=new r.Z(e.coords);t.transform("EPSG:4326","EPSG:3857"),c.push(new o.Z({geometry:t,finished:!1}))})),C(c,50*e)}d.on("postrender",G)}))}}),p=new g.Z({source:Z,style:function(e){return e.get("finished")?y:null}});m.addLayer(p);const E=.02;function G(e){const t=(0,u.u3)(e),n=e.frameState;t.setStyle(y);const o=Z.getFeatures();for(let e=0;e<o.length;e++){const s=o[e];if(!s.get("finished")){const e=s.getGeometry().getCoordinates(),o=n.time-s.get("start");if(o>=0){const n=o*E;n>=e.length&&s.set("finished",!0);const a=Math.min(n,e.length),i=new r.Z(e.slice(0,a)),c=(0,w.dz)(m.getView().getProjection().getExtent()),f=Math.floor(m.getView().getCenter()[0]/c);i.translate(f*c,0),t.drawGeometry(i),i.translate(c,0),t.drawGeometry(i)}}}m.render()}function C(e,t){window.setTimeout((function(){let t=Date.now();e.forEach((function(e){e.set("start",t),Z.addFeature(e);const n=(e.getGeometry().getCoordinates().length-1)/E;t+=n}))}),t)}}},function(e){var t;t=9390,e(e.s=t)}]);
//# sourceMappingURL=flight-animation.js.map