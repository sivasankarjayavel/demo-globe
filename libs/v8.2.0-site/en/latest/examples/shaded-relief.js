"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4600],{47213:function(t,e,n){var a=n(1055),o=n(40824),r=n(72893),s=n(11802),i=n(64469),u=n(1940),c=n(55117);const h=new i.Z({url:"https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png",crossOrigin:"anonymous",maxZoom:15,attributions:'<a href="https://github.com/tilezen/joerd/blob/master/docs/attribution.md" target="_blank">Data sources and attribution</a>'}),l=new u.ZP({sources:[h],operationType:"image",operation:function(t,e){const n=t[0],a=n.width,o=n.height,r=n.data,s=new Uint8ClampedArray(r.length),i=2*e.resolution,u=a-1,c=o-1,h=[0,0,0,0],l=2*Math.PI,d=Math.PI/2,m=Math.PI*e.sunEl/180,f=Math.PI*e.sunAz/180,p=Math.cos(m),w=Math.sin(m);let v,g,M,b,y,Z,z,E,I,P,k,x,A,C,T;function B(t){return 256*t[0]+t[1]+t[2]/256-32768}for(g=0;g<=c;++g)for(y=0===g?0:g-1,Z=g===c?c:g+1,v=0;v<=u;++v)M=0===v?0:v-1,b=v===u?u:v+1,z=4*(g*a+M),h[0]=r[z],h[1]=r[z+1],h[2]=r[z+2],h[3]=r[z+3],E=e.vert*B(h),z=4*(g*a+b),h[0]=r[z],h[1]=r[z+1],h[2]=r[z+2],h[3]=r[z+3],I=e.vert*B(h),P=(I-E)/i,z=4*(y*a+v),h[0]=r[z],h[1]=r[z+1],h[2]=r[z+2],h[3]=r[z+3],E=e.vert*B(h),z=4*(Z*a+v),h[0]=r[z],h[1]=r[z+1],h[2]=r[z+2],h[3]=r[z+3],I=e.vert*B(h),k=(I-E)/i,x=Math.atan(Math.sqrt(P*P+k*k)),A=Math.atan2(k,-P),A=A<0?d-A:A>d?l-A+d:d-A,C=w*Math.cos(x)+p*Math.sin(x)*Math.cos(f-A),z=4*(g*a+v),T=255*C,s[z]=T,s[z+1]=T,s[z+2]=T,s[z+3]=r[z+3];return{data:s,width:a,height:o}}}),d=(new a.Z({target:"map",layers:[new r.Z({source:new c.Z}),new s.Z({opacity:.3,source:l})],view:new o.ZP({center:[-13615645,4497969],zoom:13})}),{});["vert","sunEl","sunAz"].forEach((function(t){const e=document.getElementById(t),n=document.getElementById(t+"Out");e.addEventListener("input",(function(){n.innerText=e.value,l.changed()})),n.innerText=e.value,d[t]=e})),l.on("beforeoperations",(function(t){const e=t.data;e.resolution=t.resolution;for(const t in d)e[t]=Number(d[t].value)}))}},function(t){var e;e=47213,t(t.s=e)}]);
//# sourceMappingURL=shaded-relief.js.map